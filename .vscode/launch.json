// A launch configuration that compiles the extension and then opens it inside a new window
{
  "version": "0.1.0",
  "configurations": [
    {
      "name": "Extension",
      "type": "extensionHost",
      "request": "launch",
      "runtimeExecutable": "${execPath}",
      "args": ["--extensionDevelopmentPath=${workspaceRoot}"],
      "sourceMaps": true,
      "outFiles": ["${workspaceRoot}/dist/**/*.js"],
      "preLaunchTask": "npm: webpack"
    },
    {
      "name": "Debugger",
      "type": "node",
      "request": "launch",
      "cwd": "${workspaceRoot}",
      "program": "${workspaceRoot}/out/src/debugger/main.js",
      "args": ["--server=4711"],
      "stopOnEntry": false,
      "sourceMaps": true,
      "outFiles": ["${workspaceRoot}/out/src/**/*.js"],
      "preLaunchTask": "npm: watch"
    },
    {
      "name": "Tests",
      "type": "extensionHost",
      "request": "launch",
      "runtimeExecutable": "${execPath}",
      "args": ["--extensionDevelopmentPath=${workspaceRoot}", "--extensionTestsPath=${workspaceRoot}/out/test"],
      "sourceMaps": true,
      "outFiles": ["${workspaceRoot}/out/**/*.js"],
      "preLaunchTask": "npm: test-compile"
    },
    {
      "name": "Debug Launch Dumper (python)",
      "type": "debugpy",
      "request": "launch",
      "program": "${workspaceRoot}/assets/scripts/ros2_launch_dumper.py",
      "python": "/usr/bin/python3",
      "args": [
        "${workspaceRoot}/samples/py/install/rde_py/share/rde_py/launch/rde_publisher.launch.py",
        "cs_type:=cs625",
        "robot_name:=debug_robot"
      ],
      "console": "integratedTerminal",
      "justMyCode": false,
      "cwd": "${workspaceRoot}/samples/py",
      "env": {
        "ROS_DISTRO": "kilted",
        "AMENT_PREFIX_PATH": "${workspaceRoot}/samples/py/install/rde_py:${workspaceRoot}/samples/py/src:/opt/ros/kilted",
        "CMAKE_PREFIX_PATH": "${workspaceRoot}/samples/py/install:/opt/ros/kilted",
        "LD_LIBRARY_PATH": "${workspaceRoot}/samples/py/install/lib:/opt/ros/kilted/lib",
        "PATH": "${workspaceRoot}/samples/py/install/rde_py/install/rde_py/bin:/opt/ros/kilted/bin:${env:PATH}",
        "PKG_CONFIG_PATH": "${workspaceRoot}/samples/py/install/lib/pkgconfig:/opt/ros/kilted/lib/pkgconfig",
        "PYTHONPATH": "${workspaceRoot}/samples/py/install/lib/python3.12/site-packages:${workspaceRoot}/samples/py/build/rde_py:/opt/ros/kilted/lib/python3.12/site-packages:/usr/lib/python3/dist-packages:${env:PYTHONPATH}",
        "ROS_PYTHON_VERSION": "3",
        "ROS_VERSION": "2",
        "COLCON_PREFIX_PATH": "${workspaceRoot}/samples/py/install",
        "ROS_PACKAGE_PATH": "${workspaceRoot}/samples/py/install:/opt/ros/kilted/share"
      }
    },
    {
      "name": "Debug Launch Dumper (cpp)",
      "type": "debugpy",
      "request": "launch",
      "program": "${workspaceRoot}/assets/scripts/ros2_launch_dumper.py",
      "python": "/usr/bin/python3",
      "args": [
        "${workspaceRoot}/samples/cpp/install/rde_cpp/share/rde_cpp/launch/rde_publisher.launch.py",
        "cs_type:=cs625",
        "robot_name:=debug_robot"
      ],
      "console": "integratedTerminal",
      "justMyCode": false,
      "cwd": "${workspaceRoot}/samples/cpp",
      "env": {
        "ROS_DISTRO": "kilted",
        "AMENT_PREFIX_PATH": "${workspaceRoot}/samples/cpp/install/rde_cpp:/opt/ros/kilted",
        "CMAKE_PREFIX_PATH": "${workspaceRoot}/samples/cpp/install/rde_cpp:/opt/ros/kilted",
        "LD_LIBRARY_PATH": "${workspaceRoot}/samples/cpp/install/lib:/opt/ros/kilted/lib",
        "PATH": "${workspaceRoot}/samples/cpp/install:/opt/ros/kilted/bin:${env:PATH}",
        "ROS_PYTHON_VERSION": "3",
        "ROS_VERSION": "2",
        "COLCON_PREFIX_PATH": "${workspaceRoot}/samples/cpp/install"
      }
    },
    {
      "name": "Debug MCP Server",
      "type": "debugpy",
      "request": "launch",
      "program": "${workspaceRoot}/assets/scripts/server.py",
      "python": "${workspaceRoot}/.venv/bin/python",
      "console": "integratedTerminal",
      "cwd": "${workspaceRoot}",
      "env": {
        "VIRTUAL_ENV": "${workspaceRoot}/.venv",
        "PATH": "${workspaceRoot}/.venv/bin:${env:PATH}"
      }
    }
  ],
  "compounds": [
    {
      "name": "Extension and Debugger",
      "configurations": ["Extension", "Debugger"]
    }
  ]
}
